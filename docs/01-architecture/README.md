# ç³»ç»Ÿæ¶æ„ (System Architecture)

> ğŸ—ï¸ IronForge çš„æŠ€æœ¯æ¶æ„è®¾è®¡ã€æ•°æ®æµå’Œæ¨¡å—åˆ’åˆ†

---

## ğŸ“‚ æœ¬åˆ†ç±»æ–‡æ¡£

| æ–‡æ¡£ | æè¿° | è¡Œæ•° | çŠ¶æ€ |
|------|------|------|------|
| [01-system-architecture.md](./01-system-architecture.md) | æ•´ä½“æ¶æ„ã€åˆ†å±‚è®¾è®¡ã€æ¨¡å—åˆ’åˆ† | 714 | âœ… å®Œæˆ |
| [02-data-separation-model.md](./02-data-separation-model.md) | éæ‰˜ç®¡æ¶æ„ã€å‰åç«¯æ•°æ®åˆ†ç¦» | 629 | âœ… å®Œæˆ |
| [03-database-architecture.md](./03-database-architecture.md) | æ•°æ®åº“è®¾è®¡ã€è¡¨ç»“æ„ã€ç´¢å¼•ç­–ç•¥ | 1,134 | âœ… å®Œæˆ |

---

## ğŸ¯ æ ¸å¿ƒæ¶æ„åŸåˆ™

### éæ‰˜ç®¡ + API æ··åˆæ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Browser (å®¢æˆ·ç«¯)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Private Keys (åŠ å¯†å­˜å‚¨äº IndexedDB) â”‚  â”‚  â† ğŸ”‘ ç”¨æˆ·å®Œå…¨æŒæ§
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  IronForge UI (Dioxus WASM)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ HTTP API (åªä¼ é€ tx hash ç­‰å…¬å¼€ä¿¡æ¯)
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           IronCore Backend                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Metadata: é’±åŒ…åˆ—è¡¨ã€äº¤æ˜“å†å²ã€é…ç½®  â”‚  â”‚  â† ğŸ“Š å¯æ¢å¤æ•°æ®
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Services: èšåˆæŸ¥è¯¢ã€ä»·æ ¼ã€Gas ä¼°ç®—  â”‚  â”‚  â† ğŸš€ å¢å€¼æœåŠ¡
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å››å±‚æ¶æ„

1. **Presentation Layer** (è¡¨ç¤ºå±‚) - UI ç»„ä»¶ã€é¡µé¢ã€è·¯ç”±
2. **Application Layer** (åº”ç”¨å±‚) - ä¸šåŠ¡é€»è¾‘ã€çŠ¶æ€ç®¡ç†
3. **Domain Layer** (é¢†åŸŸå±‚) - æ ¸å¿ƒå®ä½“ã€ä¸šåŠ¡è§„åˆ™
4. **Infrastructure Layer** (åŸºç¡€è®¾æ–½å±‚) - API è°ƒç”¨ã€å­˜å‚¨ã€åŠ å¯†

---

## ğŸ“š æ¶æ„æ–‡æ¡£å¯¼è¯»

### 1ï¸âƒ£ [ç³»ç»Ÿæ¶æ„è®¾è®¡](./01-system-architecture.md)
**é€‚åˆ**: æ¶æ„å¸ˆã€æŠ€æœ¯è´Ÿè´£äººã€æ–°åŠ å…¥çš„é«˜çº§å·¥ç¨‹å¸ˆ

**å†…å®¹æ¦‚è§ˆ**:
- ğŸ—ï¸ æ•´ä½“æ¶æ„å›¾ï¼ˆ4 å±‚åˆ†å±‚ï¼‰
- ğŸ“¦ æ¨¡å—åˆ’åˆ†ï¼ˆ20+ æ¨¡å—ï¼‰
- ğŸ”„ æ•°æ®æµè®¾è®¡ï¼ˆå•å‘æ•°æ®æµï¼‰
- ğŸ“Š çŠ¶æ€ç®¡ç†ï¼ˆGlobal + Localï¼‰
- ğŸ”— ä¾èµ–å…³ç³»ï¼ˆä¸¥æ ¼å•å‘ä¾èµ–ï¼‰
- ğŸš€ éƒ¨ç½²æ¶æ„ï¼ˆCDN + API Gatewayï¼‰

**å…³é”®æ¦‚å¿µ**:
- **åˆ†å±‚æ¶æ„**: Presentation â†’ Application â†’ Domain â†’ Infrastructure
- **ä¾èµ–å€’ç½®**: é«˜å±‚ä¸ä¾èµ–ä½å±‚ï¼Œéƒ½ä¾èµ–æŠ½è±¡
- **å•å‘æ•°æ®æµ**: Action â†’ State Update â†’ UI Re-render

**é˜…è¯»æ—¶é•¿**: 20 åˆ†é’Ÿ

---

### 2ï¸âƒ£ [æ•°æ®åˆ†ç¦»æ¨¡å‹](./02-data-separation-model.md)
**é€‚åˆ**: å®‰å…¨å®¡è®¡ã€äº§å“ç»ç†ã€éšç§åˆè§„äººå‘˜

**å†…å®¹æ¦‚è§ˆ**:
- ğŸ”‘ ç§é’¥ç®¡ç†ç­–ç•¥ï¼ˆå‰ç«¯ IndexedDB åŠ å¯†ï¼‰
- ğŸ“Š å…ƒæ•°æ®ç®¡ç†ï¼ˆåç«¯æ•°æ®åº“ï¼‰
- ğŸ” åŠ å¯†å­˜å‚¨æ–¹æ¡ˆï¼ˆAES-256-GCM + Argon2idï¼‰
- ğŸš« é›¶ä¿¡ä»»æ¶æ„ï¼ˆåç«¯æ°¸ä¸æ¥è§¦ç§é’¥ï¼‰
- ğŸ“ å®¡è®¡æ—¥å¿—ï¼ˆæ‰€æœ‰ API æ“ä½œå¯è¿½æº¯ï¼‰

**å…³é”®æ¦‚å¿µ**:
- **å‰ç«¯å­˜å‚¨**: Private Key, Mnemonic (åŠ å¯†)
- **åç«¯å­˜å‚¨**: Wallet List, Tx History, Settings
- **æ•°æ®æ¢å¤**: åŠ©è®°è¯ â†’ å®Œæ•´æ¢å¤ï¼Œä¸¢å¤±åç«¯ â†’ åªä¸¢å…ƒæ•°æ®
- **å®‰å…¨è¾¹ç•Œ**: API åªæ¥æ”¶ç­¾ååçš„äº¤æ˜“ï¼Œä¸æ¥è§¦åŸå§‹ç§é’¥

**é˜…è¯»æ—¶é•¿**: 15 åˆ†é’Ÿ

---

### 3ï¸âƒ£ [æ•°æ®åº“æ¶æ„](./03-database-architecture.md)
**é€‚åˆ**: åç«¯å·¥ç¨‹å¸ˆã€DBAã€æ•°æ®å»ºæ¨¡äººå‘˜

**å†…å®¹æ¦‚è§ˆ**:
- ğŸ“‹ è¡¨ç»“æ„è®¾è®¡ï¼ˆ15+ æ ¸å¿ƒè¡¨ï¼‰
- ğŸ” ç´¢å¼•ç­–ç•¥ï¼ˆå¤åˆç´¢å¼•ã€è¦†ç›–ç´¢å¼•ï¼‰
- ğŸ—„ï¸ åˆ†åŒºæ–¹æ¡ˆï¼ˆæ—¶é—´åˆ†åŒºã€å“ˆå¸Œåˆ†åŒºï¼‰
- ğŸ”— å¤–é”®çº¦æŸï¼ˆçº§è”åˆ é™¤ã€å¼•ç”¨å®Œæ•´æ€§ï¼‰
- ğŸ“Š æŸ¥è¯¢ä¼˜åŒ–ï¼ˆN+1 é—®é¢˜ã€æ‰¹é‡æŸ¥è¯¢ï¼‰

**æ ¸å¿ƒè¡¨**:
- `users` - ç”¨æˆ·è´¦æˆ·
- `wallets` - é’±åŒ…å…ƒæ•°æ®
- `transactions` - äº¤æ˜“å†å²
- `tokens` - ä»£å¸ä¿¡æ¯
- `nft_assets` - NFT èµ„äº§

**æŠ€æœ¯æ ˆ**: CockroachDB / PostgreSQL

**é˜…è¯»æ—¶é•¿**: 25 åˆ†é’Ÿ

---

## ğŸ” æ¶æ„å†³ç­–è®°å½• (ADR)

### ä¸ºä»€ä¹ˆé€‰æ‹© Dioxusï¼Ÿ
- âœ… 100% Rustï¼Œç±»å‹å®‰å…¨
- âœ… ä¼˜ç§€çš„ WASM æ”¯æŒï¼ˆå°ä½“ç§¯ï¼‰
- âœ… React-like APIï¼ˆå­¦ä¹ æˆæœ¬ä½ï¼‰
- âœ… æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSEO å‹å¥½ï¼‰

### ä¸ºä»€ä¹ˆé€‰æ‹©å››å±‚æ¶æ„ï¼Ÿ
- âœ… èŒè´£æ¸…æ™°ï¼ˆå•ä¸€èŒè´£åŸåˆ™ï¼‰
- âœ… æ˜“äºæµ‹è¯•ï¼ˆæ¯å±‚ç‹¬ç«‹æµ‹è¯•ï¼‰
- âœ… æ˜“äºæ‰©å±•ï¼ˆæ’ä»¶åŒ–ï¼‰
- âœ… æ˜“äºç»´æŠ¤ï¼ˆä½è€¦åˆï¼‰

### ä¸ºä»€ä¹ˆå‰ç«¯å­˜å‚¨ç§é’¥ï¼Ÿ
- âœ… éæ‰˜ç®¡ï¼ˆç”¨æˆ·å®Œå…¨æŒæ§ï¼‰
- âœ… å®‰å…¨ï¼ˆåç«¯è¢«æ”»å‡»ä¹Ÿä¸å½±å“ç§é’¥ï¼‰
- âœ… åˆè§„ï¼ˆç¬¦åˆå»ä¸­å¿ƒåŒ–ç†å¿µï¼‰
- âœ… å®¡è®¡å‹å¥½ï¼ˆé€æ˜å¯éªŒè¯ï¼‰

---

## ğŸ› ï¸ æ¶æ„å®æ–½æŒ‡å—

### æ¨¡å—åˆ’åˆ†åŸåˆ™
1. **é«˜å†…èš**: ç›¸å…³åŠŸèƒ½æ”¾åœ¨åŒä¸€æ¨¡å—
2. **ä½è€¦åˆ**: æ¨¡å—é—´é€šè¿‡æ¥å£é€šä¿¡
3. **å•å‘ä¾èµ–**: é¿å…å¾ªç¯ä¾èµ–
4. **èŒè´£å•ä¸€**: ä¸€ä¸ªæ¨¡å—åªåšä¸€ä»¶äº‹

### ä»£ç ç»„ç»‡
```
src/
â”œâ”€â”€ pages/              # Presentation Layer
â”œâ”€â”€ components/         # Presentation Layer
â”œâ”€â”€ services/           # Application Layer
â”œâ”€â”€ domain/             # Domain Layer
â”œâ”€â”€ infrastructure/     # Infrastructure Layer
â”‚   â”œâ”€â”€ api/           # API è°ƒç”¨
â”‚   â”œâ”€â”€ storage/       # IndexedDB å°è£…
â”‚   â”œâ”€â”€ crypto/        # åŠ å¯†å·¥å…·
â”‚   â””â”€â”€ blockchain/    # åŒºå—é“¾å®¢æˆ·ç«¯
â””â”€â”€ utils/             # é€šç”¨å·¥å…·
```

### ä¾èµ–æ³¨å…¥
```rust
// ä½¿ç”¨ Trait å®šä¹‰æ¥å£
pub trait WalletRepository {
    async fn get_wallet(&self, id: &str) -> Result<Wallet>;
}

// å…·ä½“å®ç°
pub struct ApiWalletRepository { /* ... */ }
impl WalletRepository for ApiWalletRepository { /* ... */ }

// æ³¨å…¥ä¾èµ–
pub struct WalletService<R: WalletRepository> {
    repo: R,
}
```

---

## ğŸ“Š æ¶æ„æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å½“å‰çŠ¶æ€ |
|------|------|----------|
| **æ¨¡å—æ•°é‡** | < 30 | 25 |
| **å¾ªç¯ä¾èµ–** | 0 | 0 |
| **æµ‹è¯•è¦†ç›–ç‡** | 90%+ | 85% |
| **WASM ä½“ç§¯** | < 500KB | 680KB |
| **API å“åº”æ—¶é—´** | < 100ms | 80ms (p95) |
| **é¡µé¢åŠ è½½æ—¶é—´** | < 2s | 1.8s |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **æŠ€æœ¯æ ˆé€‰å‹**: [02-technical-design/01-tech-stack.md](../02-technical-design/01-tech-stack.md)
- **API è®¾è®¡**: [03-api-design/01-ironcore-backend-api-reference.md](../03-api-design/01-ironcore-backend-api-reference.md)
- **å®‰å…¨æ¶æ„**: [04-security/03-security-architecture.md](../04-security/03-security-architecture.md)
- **éƒ¨ç½²æŒ‡å—**: [06-production/05-deployment-guide.md](../06-production/05-deployment-guide.md)

---

**æœ€åæ›´æ–°**: 2025-12-06  
**ç»´æŠ¤è€…**: Architecture Team  
**å®¡æŸ¥è€…**: CTO, Lead Engineers
